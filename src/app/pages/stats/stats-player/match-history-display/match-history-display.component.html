<app-card>
  <div class="header">
    <h1>MATCH HISTORY</h1>
  </div>
</app-card>
<div class="match-holder">
  <ng-container *ngFor="let match of matches; index as i">
    <div class="match">
      <div class="match-item" (click)="collapsedId == i ? collapsedId = -1 : collapsedId = i">
        <div>{{ (getDate(match) | amFromUnix) | amCalendar }}</div>
        <div>{{ 'BO' + getBestOf(match) }} / {{ getMatchType(match) }}</div>
        <div [innerHTML]="getWinLossFormatted(match)"></div>
        <div [innerHTML]="getFormattedScore(match)"></div>
        <div>{{ getMaps(match) }}</div>
      </div>
      <ng-container *ngIf="collapsedId == i">
        <div class="match-collapsible">
          <div class="collapsible-round" *ngFor="let round of match.stats.rounds; index as roundIndex">
            <div class="collapsible-table-holder">
              <table *ngFor="let team of round.teams">
                <thead>
                  <tr class="no-hover">
                    <th>Name</th>
                    <th>Kills</th>
                    <th>Assists</th>
                    <th>Deaths</th>
                    <th>HS%</th>
                    <th>MVP</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="no-hover" *ngFor="let player of getTeamPlayersSorted(team.players)">
                    <td [class.text-faceit]="player.player_id == selectedPlayerId">
                      <a [routerLink]="['../', player.nickname]">{{ player.nickname }}</a>
                    </td>
                    <td>{{ player.player_stats.Kills }}</td>
                    <td>{{ player.player_stats.Assists }}</td>
                    <td>{{ player.player_stats.Deaths }}</td>
                    <td>{{ player.player_stats['Headshots %'] }}%</td>
                    <td>{{ player.player_stats.MVPs }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </ng-container>
</div>
